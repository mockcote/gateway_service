server:
  port: 8080

spring:
  application:
    name: gateway-service

  cloud:
    gateway:
      routes:
        # 인증 관련 요청 라우팅
        - id: auth-route
          uri: http://localhost:8081
          predicates:
            - Path=/auth/**

        # 사용자 회원가입 요청 라우팅
        - id: user-join-route
          uri: http://localhost:8081
          predicates:
            - Path=/user/join/**

        # 사용자 조회 요청 라우팅
        - id: user-find-route
          uri: http://localhost:8081
          predicates:
            - Path=/user/find/all

        # 사용자 관련 요청 라우팅
        - id: user-route
          uri: http://localhost:8081
          predicates:
            - Path=/user/**
          filters:
            - JwtAuthenticationFilter

        # 테스트 관련 요청 라우팅
        - id: test-route
          uri: http://localhost:8082
          predicates:
            - Path=/test/**
          filters:
            - JwtAuthenticationFilter

        # 통계 관련 요청 라우팅
        - id: stat-route
          uri: http://localhost:8082
          predicates:
            - Path=/stats/**
          # JWT 인증 필터 적용 예정 (임시로 비활성화)

        # 문제 관련 요청 라우팅
        - id: problem-route
          uri: http://localhost:8083
          predicates:
            - Path=/problems/**
          filters:
            - JwtAuthenticationFilter

      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials, RETAIN_UNIQUE

  web:
    resources:
      add-mappings: false

jwt:
  secret: 7nepDBvcmydW2xwfhL0Dk9qiPWq9pYtGKVQoncHP8Ok=
  expiration: 3600000 # 1시간

logging:
  level:
    root: INFO
    org.springframework.cloud.gateway: DEBUG
    com.example.gatewayservice: DEBUG
    com.example.gatewayservice.filter: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    io.jsonwebtoken: DEBUG
    org.springframework.http.server.reactive: DEBUG
    reactor.netty: INFO
    io.netty: INFO
